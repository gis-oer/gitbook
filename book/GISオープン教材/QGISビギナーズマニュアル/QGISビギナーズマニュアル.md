# QGISビギナーズマニュアル
本教材は、QGIS入門者向けの実習用教材です。QGISの機能やデータの読み込みなどについて解説しています。  
本教材を使用する際は、[利用規約]をご確認いただき、これらの条件に同意された場合にのみご利用下さい。

[利用規約]:../../../master/利用規約.md

**Menu**
----------
* [QGISとは？](#QGISとは？)
* [インストールする](#インストールする)
* [起動する](#起動する)
* [ウインドウの確認](#ウインドウの確認)
* [各種ボタンについて](#各種ボタンについて)
* [機能説明](#機能説明)
* [データの読み込み](#データの読み込み)
* [プラグイン](#プラグイン)
* [地図のレイアウト](#地図のレイアウト)
* [属性テーブル](#属性テーブル)
* [プロパティ](#プロパティ)
* [Python入門](#python入門)
* [データの保存形式](#データの保存形式)
* [参考ページの紹介](#参考ページの紹介)

**使用データ**

**スライド教材**  
スライドのダウンロードは[こちら](https://github.com/yamauchi-inochu/demo/raw/master/GISオープン教材/QGISビギナーズマニュアル/QGISビギナーズマニュアル.pptx)
----------

## <a name = "QGISとは？">QGISとは？

　
- QGISは、オープンソースかつ無料で利用できるGIS（GNU General Public Licenseで提供）。
- Windows,Mac,Linux,Unix, Androidなど様々な環境で動作する。
- 様々なプラグインが用意されていることや、GRASSやPostGISなど他のオープンソースGISとの連携ができることで、多様な分析が可能。
- Web上に多数のマニュアルがアップロードされている。  

>( http://qgis.org/ja/site/about/index.html を参考に作成 )

[▲メニューへもどる]  
[▲メニューへもどる]:QGISビギナーズマニュアル.md#menu

## インストールする

### 最新版のインストール
![インストール](pic/Qpic1.png)  
[QGIS](http://qgis.org/ja/site/index.html)の公式ホームページから、QGISをダウンロードする。  
PCの環境にあわせて、32bit版か64bit版を選択してダウンロードする(LTR版を推奨)。
ダウンロードが終了したら、.exeファイルを実行しインストールを行う。  

### 旧版のインストール
**本教材ではQGIS2.8を基本に構成している**
![インストール](pic/Qpic1-4.png)
QGISのサイト（http://qgis.org/ja/site/）を開き、「ダウンロードする」　をクリックする。
全てのリリースのタブに切り替えて、「古いバージョンのダウンロード」をクリックする。本教材で中心になっているQSIS2.8版（最終リリース版）をダウンロードする。



[▲メニューへもどる]  

## 起動する
![起動](pic/Qpic2.png)  
デスクトップのQGISアイコンをダブルクリックし、QGISを起動する。
起動するのに少し時間がかかるため待機する。
右側の画面が表示されたら、起動完了。

[▲メニューへもどる]  

## ウインドウの確認
![ウインドウ](pic/Qpic3.png)  

[▲メニューへもどる]  

## 各種ボタンについて
![ボタンA](pic/Qpic4.png)  
①QGISファイルを保存　②名前をつけてQGISファイルを保存　③地図移動　④地図の拡大と縮小　⑤選択領域にズーム
⑥動作の前後移動　⑦レイヤの情報表示　⑧選択と選択取り消し　⑨長さ、面積計測（手動）　⑩レイヤ編集　
⑪ベクタレイヤの読み込み　⑫ラスタレイヤの読み込み　⑬テキストファイルの読み込み

![ボタンB](pic/Qpic5.png)  

[▲メニューへもどる]  

##データの読み込み　①ベクタ
![ベクタ](pic/Qpic6.png)  
ベクタデータを読み込むアイコンをクリックするとベクタレイヤ追加ウインドウが表示される。
文字コードにあわせてエンコーディングを設定し、ブラウズからファイルを選択する。

##データの読み込み　②ラスタ
![ラスタ](pic/Qpic7.png)  
ラスタデータを読み込むアイコンをクリックし、読み込みたいラスタデータを選択する。

##データの読み込み　③ＣＳＶ
![ＣＳＶ](pic/Qpic8.png)  
テキスト読み込みのアイコンから、CSVファイルを読み込む。
参照からファイルを選択し、ファイル形式をCSVにする。X,Yフィールドに対応する緯度経度があれば指定。し、緯度経度がなければジオメトリなしにチェックをする。

[▲メニューへもどる]  

## 機能説明
![機能説明a](pic/Qpic9.png)  
プロジェクト：QGIS（.qgs）ファイルの保存や読み込み、地図のレイアウト、エクスポートができる。  
編集：ベクターレイヤの編集ができる。編集状態になると、アクティブになる。

![機能説明b](pic/Qpic10.png)  
ビュー：地図の移動や拡大、縮小など、地図画面の操作ができる。  
レイヤ：ベクターやラスタなどのレイヤが追加できる。
ポイント、ライン、ポリゴン新規レイヤの作成もできる。

![機能説明c](pic/Qpic11.png)  
設定：オプションから、プロジェクトの設定やスナップオプションが設定できる。  
プラグイン：プラグインの管理とインストールができる。python入力画面が開ける。

![機能説明d](pic/Qpic12.png)  
ベクタ：斜面方位図や陰影図の作成などラスタに関する処理ができる。  
ラスタ：バッファやクリップなどベクタに関する処理ができる。

![機能説明e](pic/Qpic13.png)  
データベース：PostGISなどのデータベースへの接続やeVisプラグインによる外部ファイルとの連携が可能。  
Web：背景地図の設定やweb地図の書き出しができる（プラグインによる）。

![機能説明f](pic/Qpic14.png)  
プロッセッシング：他のGISソフトウェアと連携して操作ができる（R,GRASS,SAGAなどがQGIS内で処理できる）。  
ヘルプ：QGISのヘルプが確認できる。

[▲メニューへもどる]  

## プラグイン
QGISオフィシャルプラグインリポジトリから様々なプラグインがインストールできる。設定から別のリポジトリを追加することもできる。
![プラグインのインストール](pic/Qpic15.png)  
プラグインから、プラグインの管理とインストールを選択する。
検索から、インストールしたいプラグインを検索する。
以下のような便利なプラグインが充実している。
![プラグインの例](pic/Qpic16.png)  

### タイルレイヤプラグイン
プラグインの管理とインストールからTileLayerPluginをインストールし、各種webページを参考に.tsvファイルを作成し、読み込む。

[▲メニューへもどる]  

## 地図のレイアウト
![地図のレイアウト](pic/Qpic20.png)  
プロジェクトから、新規プリントコンポーザを立ち上げ、コンポーザタイトル（地図名など任意）を入力する。※オンザフライとレイヤの座標系を統一しておく。

### プリントコンポーザ

![プリントコンポーザ](pic/Qpic21.png)  
①アイテムの選択と移動　②地図の移動　③地図の追加　④画像の追加　⑤凡例の追加　⑥縮尺バーの追加　⑦地図の更新
※アイテムの削除は編集から行う。

地図、縮尺バー、凡例を追加し、アイテムプロパティで調整する。
![レイアウト](pic/Qpic22.png)  

縮尺バーを選択し、アイテムプロパティで調整する。
![縮尺](pic/Qpic23.png)  

凡例を選択し、アイテムプロパティで調整する
![凡例](pic/Qpic24.png)  
自動アップデートのチェックをはずすと凡例が編集できる。名称の変更、凡例項目の追加と削除ができる。

画像の追加から方位記号を追加する
![方位](pic/Qpic25.png)  
アイテムプロパティの検索ディレクトリをクリックすると様々なイメージが参照できる。

![エクスポート](pic/Qpic26.png)  
地図のレイアウトが整ったら、画像としてエクスポートする。

![エクスポートを表示](pic/Qpic27.png)  
画像としてエクスポートした地図を表示する。

### QGISのビュー上に凡例と方位記号を表示する

![ビューa](pic/Qpic28.png)  
ビューから、地図装飾を選択する。
地図装飾からスケールバー、方位記号を追加する。
それぞれの形式や配置を決め、「方位or縮尺バーを使用」をチェックする。

![ビューb](pic/Qpic29.png)  
QGISのビュー上に縮尺と方位記号が表示された。

[▲メニューへもどる]  

## 属性テーブル
※以下の教材は、国土交通省国土政策局「国土数値情報（東京都　地価公示データ）」を加工したものを利用し、作成している。

![属性テーブルa](pic/Qpic30.png)  
レイヤから属性テーブルを開き、中身を確認する.

![属性テーブルb](pic/Qpic31.png)  
属性テーブルで選択したものは、地図上で黄色で表示される。
選択アイコンで地図上のレイヤを選択した場合は、その属性テーブルが選択される。

[▲メニューへもどる]  

## プロパティ
※以下の教材は、国土交通省国土政策局「国土数値情報（東京都　地価公示データ）」を加工したものを利用し、作成している。

![プロパティ](pic/Qpic32.png)  
レイヤウインドウからレイヤを選択し、右クリックでプロパティを表示する。

![一般情報](pic/Qpic33.png)  
一般情報：座標系を確認したり、文字コード、表示名の変更ができる。
スタイルやラベルからレイヤを整えることができる。

![スタイルa](pic/Qpic34.png)  

![スタイルb](pic/Qpic35.png)  

![スタイルc](pic/Qpic36.png)  

[▲メニューへもどる]  

## <a name = "Python入門">Python入門
※以下の教材は、国土交通省国土政策局「国土数値情報（東京都　地価公示データ）」を加工したものを利用し、作成している。  

上級者は、pythonでコードを書いて処理したり、自分でプラグインをつくることができる。
![Python入門a](pic/Qpic37.png)  
プラグインから、Pythonコンソールを開く。

![Python入門b](pic/Qpic38.png)  
Pythonでは、値やオブジェクトを変数へ代入する。今回の場合をみるとtokyo（変数）に‘test’（文字列）を代入している。
そのため、testと入力したら’tokyo’が返される。

![Python入門c](pic/Qpic39.png)  
変数には数値型も代入でき、tokyo=23を代入するしtokyo+1を実行すると24が返される。
文字型との違いは、 ’’があるかないかで区別している。他にリストや辞書を代入できる。

QGISでは、独自のPython関数が用意されており、それを読み込むことができる。
それ以外に、拡張モジュールもあり、多くの関数が扱うこともできる。
詳しくは、[QGIS API Documentation]を参照。
[QGIS API Documentation]:<http://www.qgis.org/api/index.html>

![Python入門d](pic/Qpic40.png)  
QGIS独自のPython関数を用いて、アクティブになってるポイントレイヤの個数を集計した。

[▲メニューへもどる]  

## データの保存形式
![データの保存](pic/Qpic41.png)  
レイヤの上で右クリックし名前をつけて保存をクリックするとShapeファイル以外にも、CSV,KML,GeoJASONなど様々な形式を選択できる。

KMLは、GoogleEarthで利用できる形式であり、Cesiumなどを利用することで、Web上でも表現できる。
![KML](pic/Qpic42.png)
東京駅から東京タワーまでの道のりを表示

CSVは、カンマで区切られたデータ形式で、座標値をもっていれば
CartoDBなどで簡単にWebGISとして表現できる。
![CSV](pic/Qpic43.png)  
裾野市オープンデータ　広域避難地・市指定避難所データを加工したものを利用し作成

[▲メニューへもどる]  

## 参考ページの紹介
- QGISについて詳しく勉強したい方　QGISユーザーガイド
①http://qgis.org/ja/site/about/index.html  
- QGISとPythonについて詳しく勉強したい方　 PyQGIS 開発者用 Cookbook
②http://docs.qgis.org/2.2/ja/docs/pyqgis_developer_cookbook/  

[▲メニューへもどる]  

**その他のライセンス**  
本教材で利用しているキャプチャ画像の出典やクレジットについては、[その他のライセンスについて]よりご確認ください。
[その他のライセンスについて]:../その他のライセンスについて.md
