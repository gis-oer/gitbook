# OpenStreetMapとクライシスマッピング
本教材は、「OpenStreetMap(OSM)とクライシスマッピング」の実習用教材です。OSMの閲覧方法や地図データの作成とOSMを利用したクライシスマッピングについての解説を行っています。

本教材を使用する際は、[利用規約]をご確認いただき、これらの条件に同意された場合にのみご利用下さい。
[利用規約]:../../../../master/利用規約.md

**Menu**
-----
**OpenStreetMap**
* [OpenStreetMapとは？](#OpenStreetMapとは？)
* [基本操作](#基本操作)
* [編集のルール](#編集のルール)
* [アカウントの取得](#アカウントの取得)
* [OSMの編集](#OSMの編集)
* [エディタ（JOSM）の使い方](#エディタ（JOSM）の使い方)
* [データを利用する](#データを利用する)

**クライシスマッピング**
* [クライシスマッピングとは？](#クライシスマッピングとは？)
* [クライシスマッピングの歴史](#クライシスマッピングの歴史)
* [OSMを利用したクライシスマッピング](#OSMを利用したクライシスマッピング)

本教材を使用する際は、[利用規約]をご確認いただき、これらの条件に同意された場合にのみご利用下さい。

**使用データ**

本教材は、OpenStreetMapのキャプチャー画像を利用しています（ © OpenStreetMap Contributors）。

**スライド教材**
スライドのダウンロードは[こちら]
[こちら]:../../../../../raw/master/GISオープン教材/インターネットの活用に関する教材/OpenStreetMAPとクライシスマッピング/OpenStreetMapとクライシスマッピング.pptx

----------

## <a name="OpenStreetMapとは？"></a>OpenStreetMapとは？
* OpenStreetMap（OSM）は、誰もが利用できるフリーの地理情報データを作成するプロジェクト

* アカウントを登録していれば、地図の編集が自由にできる

* 作成した地理情報データを自由に利用することができる
> OpenStreetMap Japan https://openstreetmap.jp/ を参考に作成

[▲メニューへもどる]
[▲メニューへもどる]:OpenStreetMapとクライシスマッピング.md#menu
## 基本操作
[OpenStreetMap]にアクセスする。

![osm](pic/osmpic_1.png)
(左図)
①　地名や住所による検索ができる
②　データの編集やエクスポートができる
③　現在地の表示、地図の切り替え、凡例の表示、地図の共有、編集やデータに関するメモ、地図データの詳細確認などができる。

(右図)　どのユーザーがどんな情報の地物を入力したかなどを確認することができる。
※　表示範囲が大きいとデータが読み込めない

[OpenStreetMap]:http://www.openstreetmap.org

## 編集のルール
* ポイント、ライン、ポリゴンで地物を表現する
* 地物の属性をタグとして付与する
  >タグの詳細は、http://wiki.openstreetmap.org/wiki/JA:Map_Features/ を参照

* 作成した地理情報データを自由に利用することができる
* Google Mapsなどを用いたOSMの編集は、できない（ソースにする媒体の利用規約などを参照して利用）

[▲メニューへもどる]

## アカウントの取得
OSMの編集にはアカウントが必要となる。

![osm](pic/osmpic_2.png)
[OpenStreetMap]にアクセスし、ユーザー登録をクリックする
登録したメールアドレスにメールが届いているのを確認する

[▲メニューへもどる]

## <a name="OSMの編集"></a>OSMの編集
![osm](pic/osmpic_3.png)
[OpenStreetMap]にアクセスし、任意の地域を拡大する。
編集をクリックし、IDを利用する。

![osm](pic/osmpic_4.png)
背景にBingマップが表示されている。このまま編集することも可能。
今回は、カスタムから地理院タイルを読み込む。
地理院タイルのURLやタグについては、http://wiki.openstreetmap.org/wiki/JA:GSImaps を参照する。


### 建物の追加
![osm](pic/osmpic_5.png)
エリアをクリックし、建物にそってクリックでポリゴンを描画、ダブルクリックでポリゴンを閉じる。
左の画面からポリゴンの情報を選択する（タグ付け）。
すべてのタグから、+マークをクリックし、Sourceを入力する（今回は地理院地図のタグ）。

### その他の地物の追加
![osm](pic/osmpic_6.png)
ポリゴンと同じ方法でポイントやポリゴンなどの地物を追加する。
地物を追加し、左のウィンドウから属性を設定すると一番下にタグ(データに記載される情報)が追加される。
タグの入力や選択は、http://wiki.openstreetmap.org/wiki/JA:Map_Features を参考にする。
sourceについて、背景画像から判断できない場合は、現地調査（source = survey）などで取得する。
道路等のラインを作成する場合は、接合をチェックする。

### 編集の保存とアップロード
![osm](pic/osmpic_7.png)
「保存」をクリックし変更セットのコメントを入力する。（英文が望ましい。）
OSMロゴ画像をクリック or ウインドウを閉じ、編集を終了する。数分後にアップロードが反映される。

[▲メニューへもどる]

## <a name="エディタ（JOSM）の使い方"></a>エディタ（JOSM）の使い方
※　ブラウザで編集しない場合

![osm](pic/osmpic_8.png)
[JOSMダウンロードサイト](https://josm.openstreetmap.de/wiki/Ja%3AWikiStart)にアクセスしJOSMのインストーラをダウンロードする。ダウンロードしたzipを解凍し、.exeファイルをインストールする。

### JOSMの設定
![osm](pic/osmpic_9.png)
編集＞設定をクリックし、地球アイコンから、OSMのアカウント情報を入力する。

### 編集範囲のダウンロード
![osm](pic/osmpic_10.png)
ファイル＞OSMからのダウンロードをクリックする。
編集したい範囲をドラックし、ダウンロードをクリックする
※地図の移動は右クリックを使用する。

![osm](pic/osmpic_11.png)
画像から背景地図を追加する。
追加された背景画像は、右上のウインドウに表示される。

![osm](pic/osmpic_12.png)
地物を追加するアイコンをクリックし、ポリゴンを描画する。
追加ボタンからsourceなどタグを追加し、okをクリックする。
ラインやポイントは描画後にダブルクリック。
ポリゴンはポリゴンを閉じる。
削除は選択アイコンで選択し、Deleteを押す。

![osm](pic/osmpic_13.png)
編集＞データをアップロードクリックする。
変更セットのコメントや、データソースを入力し、アップロードを行う。

![osm](pic/osmpic_14.png)
数分後にアップロードした地物が追加される。

![osm](pic/osmpic_15.png)
編集＞名前をつけて保存　をクリックし作業ファイルを保存する。
再開する場合は編集＞開く　で保存したファイルを選択する。

### GPSデータを読み込む
![osm](pic/osmpic_16.png)
ファイル＞開く　をクリックし.gpxファイルを選択する。
GPSデータが表示されるため、編集などに利用することができる。
ファイル＞新規レイヤーを作成　をクリックするとレイヤの作成ができる。

[▲メニューへもどる]

## データを利用する
![osm](pic/osmpic_17.png)
データをダウンロードしたい範囲を選択し、Exportをクリックする。
QGISを開き、ベクタ＞OpenStreetMap＞XMLからトポロジをインポートするをクリックする。
出力先のファイル名などを入力し、OKをクリックする。

![osm](pic/osmpic_18.png)
QGISを開き、ベクタ＞OpenStreetMap＞SpatiaLite形式にトポロジをインポートするをクリックする。
インポートしたいデータを選択し、OKをクリックする。

![osm](pic/osmpic_19.png)
http://overpass-turbo.eu/ にアクセスし、データをダウンロードする。
ウィザードをクリックし、 emergency=defibrillator を入力し、AED情報を抜き出す。
エクスポートをクリックし、KMLをクリックとデータが保存できる。

データを利用する際は、Map data
© OpenStreetMap contributors　などのクレジットが必要。
詳細は、[http://wiki.openstreetmap.org/wiki/JA:Legal_FAQ](http://wiki.openstreetmap.org/wiki/JA:Legal_FAQ) を確認する。

[▲メニューへもどる]

## クライシスマッピングとは？

* 地震、津波、洪水などの災害、伝染病、政治と関連した暴動や社会問題というような危機に対するマッピング活動

* 地図による救済、復興のための支援活動で、インターネットを利用したリアルタイムかつリモートによる情報の整理と集約を行う

* 地図は世界中のOpenStreetMapの利用者（マッパー）などによるボランティアによって行われる

## クライシスマッピングの歴史
![osm](pic/osmpic_20.png)
![osm](pic/osmpic_21.png)

[▲メニューへもどる]

## <a name="OSMを利用したクライシスマッピング"></a>OSMを利用したクライシスマッピング

### OSM Tasking Managerの利用
OSM Tasking Managerは、OSM人道支援チーム "Humanitarian OSM Team, HOT"が、クライシスマッピングの支援ツールとして提供しているもの。
![osm](pic/osmpic_22.png)
[OSM Tasking Manager]にアクセスし、タスクを確認する。
検索や並び替えで、作業するタスクを選択する。
※タスクによっては、初心者の参加が望ましくないものもあるため注意する。
[OSM Tasking Manager]:http://tasks.hotosm.org/

![osm](pic/osmpic_23.png)
「解説」からマッピングの概要を把握し、「インストラクション」をクリックする。マップする対象と変更セットの内容を確認する。
Project Specific Mapping Notesなどその他の説明も確認し、「参加」をクリックする。
※画面右上をクリックし、OSMにログインしておく。

![osm](pic/osmpic_24.png)
凡例をもとに編集するエリアを選択し、「マッピング開始」をクリックする。

![osm](pic/osmpic_25.png)
「エディタ（ID）」をクリックすると、OSM画面が起動する。
>このタスクの詳しい説明については、
https://www.youtube.com/watch?v=WjNawjN53lw&feature=youtu.be/ を参照する。

![osm](pic/osmpic_26.png)
タスクに従って、建物をトレースし、「保存」をクリックする。
編集セットのコメントにタスクの内容が自動で入力されていることを確認し、「SAVE」をクリックする。

![osm](pic/osmpic_27.png)
編集が終了したら、「アンロック」をクリックする。
選択した地域内のタスクが完了している場合は、「完了としてマーク」をクリックする。

[▲メニューへもどる]

**その他のライセンス**
本教材で利用しているキャプチャ画像の出典やクレジットについては、[その他のライセンスについて]よりご確認ください。
[その他のライセンスについて]:../../その他のライセンスについて.md
