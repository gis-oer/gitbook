# 課題：ネットワーク分析
　  この実習は、道路データを用いたネットワーク分析として最短経路検索とネットの分割を行うものです。
　GISでは、道路などのラインデータ等を用いて任意の地点間の経路等を求める場合等にネットワーク分析が用いられます。詳しくは、[地理情報科学教育用スライド（GIScスライド）]のネットワーク分析の教材を参照してください。
　手順とGISオープン教材の[ネットワーク分析]の教材を参考に、完成例のような地図が作成できれば、完了となります。実習で利用するデータの一部は、[既存データの地図データと属性データ]の教材を参考にダウンロードしてください。GIS初学者は、本教材を進める前に[GISの基本概念]の教材を確認しておいてください。

**実習用データ**
　実習をはじめる前に、以下のデータをダウンロードしてください。なお、すべてのデータをJGD2000の平面直角座標系第Ⅲ系で統一する。国土数値情報のデータはダウンロード後に「JGD2000の平面直角座標系」へ座標変換する。国土数値情報データの読み込み時に空間参照設定のウィンドウが表示されたら、JGD2000を選択（今回の場合）した後に、変換を行う。

* 「国土交通省国土政策局「[国土数値情報]（島根県　行政区域、道路、消防署、医療施設データ）」
　※道路データは、旧 統一フォーマット形式GML(JPGIS2.1)からダウンロードする。

  >ダウンロード手法は、[既存データの地図データと属性データ]の教材を参考とする。座標系の変換手法は[空間データ]の教材を参考とする。

  **Menu**
  --------

  * [最短経路検索](#最短経路検索)
  * [グラフの分割](#グラフの分割)

-----------------

## 最短経路検索
　最短経路検索は、任意の地点間の最短経路を取得する際に用いられる手法です。QGISで簡単にできる最短経路検索を以下の手順と[ネットワーク分析]を参考に行い以下の課題に回答してください。

- 任意の2点間の最短経路（標高などのコストを含まない）を求め、「○○病院と○○病院との最短距離は○○.○○kmでした」の○○の語句を埋めて回答してください。

**完成例**
![kadai](pic/12-1.png)

**手順**
1. 島根県の行政区域、道路、医療施設のデータをQGISで読み込む。
2. レイヤウィンドウのポイントデータの上で右クリックし、プロパティからラベルを表示する。
3. 上段ウィンドウのアイコンのないグレーの個所で右クリックし、最短経路にチェックをいれ、道路グラフプラグインを起動する。
※表示されない場合は、プラグインの管理とインストールでチェックが有効になっているか確認する。
4. ベクタ＞道路グラフをクリックし、使用するラインレイヤを設定し、「OK」をクリックする。
※ネットワーク分析では、分析用にポイントと接合したグラフ（ライン）を作成する。
5. レイヤウィンドウで道路を選択した状態で、分析したい開始点と終了点の右横アイコンをクリックし、地図上で任意の2地点（医療施設のポイント付近）をクリックする。その後、計算をクリックすると長さと時間が算出される。
6. 最短経路ウィンドウから長さと時間を確認し、課題フォームの質問に回答する（記入欄に「○○病院と○○病院との最短距離は○○.○○kmでした」の○○の語句を埋めて回答してください）。

[△メニューへもどる]

## グラフの分割
　ネットの分割は、任意の地点から一定の距離ごとにネットワークを分割する手法です。例えば、避難所から道路に沿って、500ｍごとの範囲を求め付近にある消防署や病院の配置を評価したい場合等に用いられます。以下では、島根県の消防署と道路データを用いて、ネットを分割する手法について解説しています。ソフトウェアはQGISとGRASS GISを用いています。以下の手順と[ネットワーク分析]の教材を参考に、消防署から道路に沿って一定の距離を示す地図を作成してください。

**完成例**

![kadai](pic/12-2.png)

**手順**  

1. 島根県の行政区域、道路、消防署のデータをQGISで読み込む。
2. QGISのプラグインから、GRASS GISのマップセットを作成する。
3. マップセットからベクトルデータを読み込む。
4. グラフを作成する。
5. ネットの分割をする。
6. QGISでレイヤを表示し、レイアウトを整え地図を作成する。

[△メニューへもどる]

#### 完成例で使用したデータ
本ページで使用しているデータの出典については、該当する教材よりご確認ください。

[△メニューへもどる]:ネットワーク分析.md#menu

[作業メモ]:https://github.com/yamauchi-inochu/demo/blob/master/GISオープン教材/実習課題/作業メモ.md
[QGISビギナーズマニュアル]:../../QGISビギナーズマニュアル/QGISビギナーズマニュアル.md
[GRASSビギナーズマニュアル]:../../GRASSビギナーズマニュアル/GRASSビギナーズマニュアル.md
[GISの基本概念]:../../01_GISの基本概念/GISの基本概念.md
[既存データの地図データと属性データ]:../../07_既存データの地図データと属性データ/既存データの地図データと属性データ.md
[空間データ]:../../08_空間データ/空間データ.md
[空間データの結合・修正]:../../10_空間データの統合・修正/空間データの統合・修正.md
[視覚的伝達]:../../21_視覚的伝達/視覚的伝達.md
[政府統計局e-stat]:https://www.e-stat.go.jp/SG1/estat/eStatTopPortal.do
[国土数値情報]:http://nlftp.mlit.go.jp/ksj/
[基本的な空間解析]:../../11_基本的な空間解析/基本的な空間解析.md
[ネットワーク分析]:../../12_ネットワーク分析/ネットワーク分析.md
[領域分析]:../../13_領域分析/領域分析.md
[点データの分析]:../../14_点データの分析/点データの分析.md
[ラスタデータの分析]:../../15_ラスタデータの分析/ラスタデータの分析.md
[空間補間]:../../18_空間補間/空間補間.md
[地理情報科学教育用スライド（GIScスライド）]:http://curricula.csis.u-tokyo.ac.jp/slide/4.html
