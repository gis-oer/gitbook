# 課題：基本的な空間解析
本実習では、空間データから新たなデータを計測する手法および複数の空間データの位置関係から新規データの作成や距離の計測を行います。
　課題1としてGISソフトウェア上で地物の大きさを計測する手法を学びます。課題2では、ベクトルデータの形状を用いて新規のデータを作成する手法を学びます。
　手順とGISオープン教材の[空間データ]の教材を参考に、完成例のような地図が作成できれば、完了となります。実習で利用するデータの一部は、[既存データの地図データと属性データ]の教材を参考にダウンロードしてください。GIS初学者は、本教材を進める前に[GISの基本概念]の教材を確認しておいてください。

**実習用データ**
　実習をはじめる前に、以下のデータをダウンロードしてください。なお、すべてのデータをJGD2000の平面直角座標系第Ⅵ系で統一する。e-satのデータは、世界測地系、JGD2000の平面直角座標系第Ⅵ系でダウンロードする。国土数値情報のデータはダウンロード後に「JGD2000の平面直角座標系第Ⅵ系」へ座標変換する。国土数値情報データの読み込み時に空間参照設定のウィンドウが表示されたら、JGD2000を選択する（QGIS2.8.4の場合）。

* [国土数値情報] 奈良県の行政区域、学校、河川
* [政府統計局e-Stat] 奈良市、大和郡山市の境界データ（統計データは不要なため任意のもので良い）

  >ダウンロード手法は、[既存データの地図データと属性データ]の教材を参考とする。座標系の変換手法は[空間データ]の教材を参考とする。

**Menu**
--------
- [GISを用いた周長と面積の自動計測](#GISを用いた周長と面積の自動計測)
- [データの形状や属性を用いた解析](#データの形状や属性を用いた解析)


-----------------

## <a name="GISを用いた周長と面積の自動計測"></a>GISを用いた周長と面積の自動計測
　GISで示される地物は、位置や形状が座標で管理されています。そのためGIS上で、周長や面積計算を行うことができます。課題1は、属性テーブルから自動で面積と周長を計算する手法を学ぶものです。奈良県のデータを[国土数値情報]からダウンロードし、以下の手順と[基本的な空間解析]の教材を参考に、処理を行い以下の質問に回答してください。

**質問**
- 奈良県山添村の面積と周長を求めてください。


**手順**
1. QGISで、[国土数値情報]からダウンロードした奈良県の行政区域を読み込む。
2. 編集モード切替ボタンをクリックし、属性テーブルを開く。
3. 新規属性テーブルを作成し、各市町村ポリゴンごとに周長を計測する。
4. 同じように新規属性テーブルを作成し、各市町村ポリゴンごとに面積を計測する。
5. 地図から山添村を空間選択し、属性テーブルの周長と面積確認し、質問に回答する。
6. 編集モード切替ボタンを再度クリックし、編集を完了させる。
※ 編集を完了（保存）しないとデータは更新されない。

[△メニューへもどる]

-----------------

## <a name="データの形状や属性を用いた解析"></a>データの形状や属性を用いた解析
　GISで解析をする場合、空間データの範囲が適切であるかということが重要になります。例えば東京都の駅数を計算する場合には、東京都の範囲のみのデータで十分ですが、国土数値情報でダウンロードできるデータは全国分のものになります。この場合、解析に必要のない範囲のデータを含んでいるため、解析用に東京都の範囲のデータを抽出する必要があります。
　この実習は、解析に必要な範囲を求め、新規レイヤとして抽出するものです。GISでは、ベクトルデータの保持する形状、位置、属性等の情報を用いることで特定の条件にあった新規レイヤを抽出することができます。以下の手順と[基本的な空間解析]の教材を参考に、奈良県内の学校のうち、奈良市と大和郡山市に位置するものを抽出した地図を作成してください。なお、作成する地図は、位置関係が分かるように範囲内の河川（または道路）が抽出されたものとします。

**完成例**
![kadai](pic/11-1.png)

**手順**
1. [政府統計局e-stat]からダウンロードした奈良市と大和郡山市の境界データをQGISで読み込む。  
2. 奈良市と大和郡山市のポリゴンを一つに、[マージ](http://www.pasco.co.jp/recommend/word/word092/)する。
3. マージしたポリゴンを行政界のないポリゴン（奈良市と大和郡山市が一つになっている）にするため、[デイゾルブ](http://www.pasco.co.jp/recommend/word/word091/)する。  
4. 国土数値情報からダウンロードした学校データを読み込み、デイゾルブした境界データを用いてクリップする（対象範囲の切り取りのため）。
5. 国土数値情報からダウンロードした河川データを読み込み、デイゾルブした境界データを用いて[インターセクト](http://www.pasco.co.jp/recommend/word/word094/)する（対象範囲の切り取りのため）。
6. 奈良市と大和郡山市の学校、行政区ポリゴン、河川などのレイヤをレイアウトし、地図を作成する。

[△メニューへもどる]

---------

#### 完成例で使用したデータ
本ページで使用しているデータの出典については、該当する教材よりご確認ください。

[△メニューへもどる]:空間データ.md#menu
[作業メモ]:https://github.com/yamauchi-inochu/demo/blob/master/GISオープン教材/実習課題/作業メモ.md
[QGISビギナーズマニュアル]:../../QGISビギナーズマニュアル/QGISビギナーズマニュアル.md
[GRASSビギナーズマニュアル]:../../GRASSビギナーズマニュアル/GRASSビギナーズマニュアル.md
[GISの基本概念]:../../01_GISの基本概念/GISの基本概念.md
[既存データの地図データと属性データ]:../../07_既存データの地図データと属性データ/既存データの地図データと属性データ.md
[空間データ]:../../08_空間データ/空間データ.md
[空間データの結合・修正]:../../10_空間データの統合・修正/空間データの統合・修正.md
[視覚的伝達]:../../21_視覚的伝達/視覚的伝達.md
[政府統計局e-stat]:https://www.e-stat.go.jp/SG1/estat/eStatTopPortal.do
[国土数値情報]:http://nlftp.mlit.go.jp/ksj/
[基本的な空間解析]:../../11_基本的な空間解析/基本的な空間解析.md
[ネットワーク解析]:../../12_ネットワーク解析/ネットワーク解析.md
[領域解析]:../../13_領域解析/領域解析.md
[点データの解析]:../../14_点データの解析/点データの解析.md
[ラスタデータの解析]:../../15_ラスタデータの解析/ラスタデータの解析.md
[空間補間]:../../18_空間補間/空間補間.md
